\hypertarget{my__code_8c_source}{}\doxysection{my\+\_\+code.\+c}
\label{my__code_8c_source}\index{Core/Src/my\_code.c@{Core/Src/my\_code.c}}
\mbox{\hyperlink{my__code_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00002}00002\ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00003}00003\ \textcolor{comment}{\ *\ \ File\ Name:\ my\_code.c}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00004}00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00005}00005\ \textcolor{comment}{\ *\ \ Created\ on:\ Mar\ 14,\ 2023}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00006}00006\ \textcolor{comment}{\ *\ \ updated:\ 4/18/2023}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00007}00007\ \textcolor{comment}{\ *\ \ Authors:\ William\ Winters\ and\ Vikash\ Ramharack}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00008}00008\ \textcolor{comment}{\ *}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00009}00009\ \textcolor{comment}{\ *\ \ Written\ for\ senior\ design\ as\ Stony\ Brook\ University}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00010}00010\ \textcolor{comment}{\ *\ \ for\ the\ Stony\ Brook\ Solar\ Racing\ team}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00011}00011\ \textcolor{comment}{\ *}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00012}00012\ \textcolor{comment}{\ *\ \ Copyright\ William\ Winters\ and\ Vikash\ Ramharack\ 2023}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00013}00013\ \textcolor{comment}{\ *\ \ released\ under\ GPL\ version\ 3}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00014}00014\ \textcolor{comment}{\ *\ \ Any\ example\ code\ or\ external\ libraries\ used\ here\ are\ the\ property\ of\ their\ owners}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00015}00015\ \textcolor{comment}{\ */}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00017}00017\ \textcolor{comment}{/*\ include\ standard\ libraries\ */}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00018}00018\ \textcolor{preprocessor}{\#include\ <string.h>}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00019}00019\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00021}00021\ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00022}00022\ \textcolor{comment}{\ *\ include\ custom\ header\ with\ function\ declarations\ ect.}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00023}00023\ \textcolor{comment}{\ *\ if\ something\ is\ broken\ you\ may\ need\ to\ look\ here}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00024}00024\ \textcolor{comment}{\ */}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00025}00025\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{my__code_8h}{my\_code.h}}"{}}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00026}00026\ \textcolor{comment}{//\#include\ "{}TestFuncs.h"{}}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00027}00027\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00028}00028\ \textcolor{comment}{/*\ include\ third\ party\ libraries\ */}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00029}00029\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{lwgps_8h}{lwgps/lwgps.h}}"{}}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00030}00030\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ads1115_8h}{ads1115.h}}"{}}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00031}00031\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_l_c_d_8h}{LCD.h}}"{}}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00032}00032\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_m_a_x31865_8h}{MAX31865.h}}"{}}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00033}00033\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{pcf8574_8h}{pcf8574.h}}"{}}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00034}00034\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00036}00036\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00037}00037\ \textcolor{comment}{/*\ define\ global\ variables\ */}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00038}00038\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00039}\mbox{\hyperlink{my__code_8c_ae1b4a2a0bd124fb2ee430c8ba7e3a071}{00039}}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{my__code_8c_ae1b4a2a0bd124fb2ee430c8ba7e3a071}{message}}[]\ =\ \textcolor{stringliteral}{"{}hello\ world"{}};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00040}00040\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00041}00041\ \textcolor{comment}{/*\ define\ GPS\ stuff\ */}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00042}\mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{00042}}\ \textcolor{keyword}{volatile}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structgps__struct}{gps\_struct}}\ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}};\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00043}\mbox{\hyperlink{my__code_8c_ac8220b038fb744675e8bf5193ebcefb2}{00043}}\ \mbox{\hyperlink{structlwgps__t}{lwgps\_t}}\ \mbox{\hyperlink{my__code_8c_ac8220b038fb744675e8bf5193ebcefb2}{hgps}};\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00045}00045\ \textcolor{comment}{//\ for\ tachometer}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00046}00046\ \textcolor{comment}{//float\ Frequency\ =\ 0;}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00047}00047\ \textcolor{comment}{//float\ rpm\ =\ 0;}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00048}00048\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00049}00049\ \textcolor{comment}{//\ for\ hall\ effect\ sensors}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00050}\mbox{\hyperlink{my__code_8c_a09dfb4af94edd4a7ea154efbb490358f}{00050}}\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structhall__struct}{hall\_struct}}\ hall1,\ hall2,\ \mbox{\hyperlink{my__code_8c_a09dfb4af94edd4a7ea154efbb490358f}{hall3}};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00052}00052\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00053}00053\ \textcolor{comment}{//\ for\ vikash's\ code}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00054}\mbox{\hyperlink{my__code_8c_a493470a87e69019c801d43e7903a0cb6}{00054}}\ uint32\_t\ \mbox{\hyperlink{my__code_8c_a493470a87e69019c801d43e7903a0cb6}{IC\_Val1}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00055}\mbox{\hyperlink{my__code_8c_ad6e044721ac3056f8eeaf52ffbb6638b}{00055}}\ uint32\_t\ \mbox{\hyperlink{my__code_8c_ad6e044721ac3056f8eeaf52ffbb6638b}{IC\_Val2}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00056}\mbox{\hyperlink{my__code_8c_a7cb3d9526cb717de1ac2f83a7b7d88a4}{00056}}\ uint32\_t\ \mbox{\hyperlink{my__code_8c_a7cb3d9526cb717de1ac2f83a7b7d88a4}{Difference}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00057}\mbox{\hyperlink{my__code_8c_a5d7fd7789fda6c42c591954c2bb70588}{00057}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{my__code_8c_a5d7fd7789fda6c42c591954c2bb70588}{Is\_First\_Captured}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00059}00059\ \textcolor{comment}{//for\ temp\ sensor}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00060}\mbox{\hyperlink{my__code_8c_ab19a506a93d50c62f012c9a628d28a90}{00060}}\ \mbox{\hyperlink{struct_max31865__t}{Max31865\_t}}\ \ \mbox{\hyperlink{my__code_8c_ab19a506a93d50c62f012c9a628d28a90}{pt100}};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00061}\mbox{\hyperlink{my__code_8c_a85c0e8708ad7a7550e5c331abc594927}{00061}}\ \textcolor{keywordtype}{bool}\ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a85c0e8708ad7a7550e5c331abc594927}{pt100isOK}};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00062}\mbox{\hyperlink{my__code_8c_ab37ad5f3cdf2a1dd5d04e2b562ae97be}{00062}}\ \textcolor{keywordtype}{float}\ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_ab37ad5f3cdf2a1dd5d04e2b562ae97be}{pt100Temp}};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00063}00063\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00064}\mbox{\hyperlink{my__code_8c_a9d3c19e881c80a6596884ecb8da4a0f4}{00064}}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{my__code_8c_a9d3c19e881c80a6596884ecb8da4a0f4}{Frequency}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00065}\mbox{\hyperlink{my__code_8h_a25e39b399c2a11f0d76e42ab8241a910}{00065}}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{my__code_8c_a25e39b399c2a11f0d76e42ab8241a910}{rpm}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00066}\mbox{\hyperlink{my__code_8h_a4d122fe4f75f69642832764efc0f451c}{00066}}\ uint16\_t\ \mbox{\hyperlink{my__code_8c_a4d122fe4f75f69642832764efc0f451c}{readValue}};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00067}\mbox{\hyperlink{my__code_8c_ac518d2e94791ccc6f84de95271e52c76}{00067}}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{my__code_8c_ac518d2e94791ccc6f84de95271e52c76}{sensitivity}}\ =\ 0.001;\ \textcolor{comment}{//\ 0.1\ for\ 20A\ Model}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00068}\mbox{\hyperlink{my__code_8c_a46d034bf9b16163f4fa1f8b7980d34c1}{00068}}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{my__code_8c_a46d034bf9b16163f4fa1f8b7980d34c1}{rawVoltage}};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00069}\mbox{\hyperlink{my__code_8c_af9653d31acfffa5a40aa709b2065e00b}{00069}}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{my__code_8c_af9653d31acfffa5a40aa709b2065e00b}{current}};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00070}00070\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00071}\mbox{\hyperlink{my__code_8c_a492129e77ccbe26628dbf3253cfc03f3}{00071}}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{my__code_8c_a492129e77ccbe26628dbf3253cfc03f3}{volt1}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00072}\mbox{\hyperlink{my__code_8c_ab75f4db6d1e874ad84b544b298551ccc}{00072}}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{my__code_8c_ab75f4db6d1e874ad84b544b298551ccc}{volt2}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00073}\mbox{\hyperlink{my__code_8c_a9ba4b6c7877ede091f28d1b0d74d0a91}{00073}}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{my__code_8c_a9ba4b6c7877ede091f28d1b0d74d0a91}{volt3}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00074}\mbox{\hyperlink{my__code_8c_a03220cc699ee703ec90047e2a87c4785}{00074}}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{my__code_8c_a03220cc699ee703ec90047e2a87c4785}{volt0}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00075}00075\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00080}\mbox{\hyperlink{my__code_8h_a4fc01d736fe50cf5b977f755b675f11d}{00080}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{my__code_8c_a4fc01d736fe50cf5b977f755b675f11d}{setup}}()}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00081}00081\ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00082}00082\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00083}00083\ \ \ \ \ \textcolor{comment}{//init\ lcd}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00084}00084\ \ \ \ \ \textcolor{comment}{//LCD\_Init();}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00085}00085\ \ \ \ \ \mbox{\hyperlink{pcf8574_8h_aa66e90a23f82feabb60b63dd39299ad6}{pcf8574\_init}}();}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00086}00086\ \ \ \ \ \mbox{\hyperlink{pcf8574_8h_aa35596e8e898426a066c74eb86266837}{pcf8574\_clr}}();}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00087}00087\ \ \ \ \ \mbox{\hyperlink{pcf8574_8h_ad7a2ce201ada868604cc706faf280eb1}{pcf8574\_cursor}}(0,\ 0);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00088}00088\ \ \ \ \ \mbox{\hyperlink{pcf8574_8h_a80c7fedc95b28a8c4711b846eec74901}{pcf8574\_send\_string}}(\textcolor{stringliteral}{"{}\ \ HELLO\ SKIPPER\ O7"{}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00089}00089\ \ \ \ \ HAL\_Delay(1000);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00090}00090\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00091}00091\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00092}00092\ \ \ \ \ \textcolor{comment}{//\ gps\ setup\ code}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00093}00093\ \ \ \ \ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_aff39d864a6594bc5f4a5e365282e00fe}{tail}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00094}00094\ \ \ \ \ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a63b72da7fff00fc0ce6cac1c4660f415}{buffStateFlag}}\ =\ write;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00095}00095\ \ \ \ \ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_aadd3a59cea049460bd4e196c59181118}{numLines}}\ =\ 14;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00096}00096\ \ \ \ \ \mbox{\hyperlink{group___l_w_g_p_s_gaf69993c7ad6cb474707f86d4d986d87f}{lwgps\_init}}(\&\mbox{\hyperlink{my__code_8c_ac8220b038fb744675e8bf5193ebcefb2}{hgps}});\ \textcolor{comment}{//\ init\ gps\ parsing\ library}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00097}00097\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00098}00098\ \ \ \ \ HAL\_UART\_Receive\_IT(\&\mbox{\hyperlink{my__code_8h_ab7c63c1b0f65db92b6a4ea19edf957e1}{huart3}}\ ,\ (uint8\_t\ *)\ \&\ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a7f4589c5a44136c693a6eee261c917bf}{newchar}}\ ,\ 1);\ \textcolor{comment}{//\ could\ use\ higher\ size\ and\ change\ parsing}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00099}00099\ \ \ \ \ \textcolor{comment}{//\ end\ gps\ setup\ code}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00100}00100\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00101}00101\ \ \ \ \ \textcolor{comment}{//external\ ADC\ setup\ code}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00102}00102\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{ads1115_8h_a67052e36b856806aa4c2b53802d557d4}{ADS1115\_Init}}(\&\mbox{\hyperlink{i2c_8h_af7b2c26e44dadaaa798a5c3d82914ba7}{hi2c1}},\ \mbox{\hyperlink{ads1115_8h_a1fd02a71e98bc7d769324677f5f56128}{ADS1115\_DATA\_RATE\_64}},\ \mbox{\hyperlink{ads1115_8h_a7b4abbfeb11693f37c8c81c22d10dbf9}{ADS1115\_PGA\_FOUR}})\ !=\ HAL\_OK)\{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00103}00103\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ init\ failed}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00104}00104\ \ \ \ \ \ \ \ \ \textcolor{comment}{//while(1)\{\}}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00105}00105\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{pcf8574_8h_aa35596e8e898426a066c74eb86266837}{pcf8574\_clr}}();}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00106}00106\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{pcf8574_8h_ad7a2ce201ada868604cc706faf280eb1}{pcf8574\_cursor}}(0,\ 0);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00107}00107\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{pcf8574_8h_a80c7fedc95b28a8c4711b846eec74901}{pcf8574\_send\_string}}(\textcolor{stringliteral}{"{}EXT\ ADC\ INIT\ FAILED"{}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00108}00108\ \ \ \ \ \ \ \ \ HAL\_Delay(1000);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00109}00109\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00110}00110\ \ \ \ \ \ \ \ \ \textcolor{comment}{//end\ external\ ADC\ setup\ code}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00111}00111\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00112}00112\ \ \ \ \ \textcolor{comment}{//\ init\ internal\ adc}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00113}00113\ \ \ \ \ \textcolor{comment}{//HAL\_ADC\_Start(\&hadc);}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00114}00114\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00115}00115\ \ \ \ \ \textcolor{comment}{//test\_gps\_blocking();}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00116}00116\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00117}00117\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00118}00118\ \ \ \ \ \textcolor{comment}{//\ temp\ setup}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00119}00119\ \ \ \ \ \mbox{\hyperlink{_m_a_x31865_8c_a7af0698160523a69eee213637c8c3ce0}{Max31865\_init}}(\&\mbox{\hyperlink{my__code_8c_ab19a506a93d50c62f012c9a628d28a90}{pt100}},\&\mbox{\hyperlink{spi_8h_ab9da65f935e805137e2eb4e18c5ab224}{hspi2}},GPIOA,GPIO\_PIN\_8,4,50);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00120}00120\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00121}00121\ \}\textcolor{comment}{//\ end\ setup}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00122}00122\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00126}\mbox{\hyperlink{my__code_8h_afe461d27b9c48d5921c00d521181f12f}{00126}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{my__code_8c_afe461d27b9c48d5921c00d521181f12f}{loop}}()}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00127}00127\ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00128}00128\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00129}00129\ \ \ \ \ \textcolor{comment}{//\ get\ gps\ data}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00130}00130\ \ \ \ \ \mbox{\hyperlink{my__code_8c_ab55f9f16932b73a407fa0bca4730d476}{gps\_rx}}();}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00131}00131\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00132}00132\ \ \ \ \ \textcolor{comment}{//\ get\ current}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00133}00133\ \ \ \ \ \mbox{\hyperlink{my__code_8c_a562b46db6df8519948cd3397d0a74c9f}{hall\_read}}();}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00134}00134\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00135}00135\ \ \ \ \ \textcolor{comment}{//get\ voltage}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00136}00136\ \ \ \ \ \textcolor{comment}{/*\ Poll\ for\ voltage\ divider*/}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00137}00137\ \ \ \ \ \mbox{\hyperlink{my__code_8c_acd5eb894164a07a00867af26c324b26a}{readVoltage}}(100.0);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00138}00138\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00139}00139\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00140}00140\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00141}00141\ \ \ \ \ \textcolor{comment}{//get\ temperature}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00142}00142\ \ \ \ \ \textcolor{keywordtype}{float}\ t;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00143}00143\ \ \ \ \ \mbox{\hyperlink{my__code_8c_a85c0e8708ad7a7550e5c331abc594927}{pt100isOK}}\ =\ \mbox{\hyperlink{_m_a_x31865_8c_a16213618890e307f757c658fd64226c2}{Max31865\_readTempC}}(\&\mbox{\hyperlink{my__code_8c_ab19a506a93d50c62f012c9a628d28a90}{pt100}},\&t);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00144}00144\ \ \ \ \ \mbox{\hyperlink{my__code_8c_ab37ad5f3cdf2a1dd5d04e2b562ae97be}{pt100Temp}}\ =\ \mbox{\hyperlink{_m_a_x31865_8c_ad7de685bbd61fb2dd020ad9a15380149}{Max31865\_Filter}}(t,\mbox{\hyperlink{my__code_8c_ab37ad5f3cdf2a1dd5d04e2b562ae97be}{pt100Temp}},0.1);\ \ \ \textcolor{comment}{//\ \ <<\ For\ Smoothing\ data}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00145}00145\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00146}00146\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00147}00147\ \ \ \ \ \textcolor{comment}{//update\ display}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00148}00148\ \ \ \ \ \mbox{\hyperlink{my__code_8c_a7259c0cadb7bc3e6b343edc3189990e7}{LCD\_paint}}();}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00149}00149\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00150}00150\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00151}00151\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00152}00152\ \ \ \ \ \textcolor{comment}{/*\ tx\ data\ */}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00153}00153\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00154}00154\ \ \ \ \ \textcolor{comment}{//message\ code,lat,long,Speed,Battery\ Current,Motor\ 1\ Current,Motor\ 2\ current,Solar\ current,V12,V24,V36,Vm1,Vm2,Vsolar,Temp1,Temp2}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00155}00155\ \ \ \ \ \textcolor{comment}{//0,40.546906,73.0733222,12.3,200.1,400.1,400.1,40.1,12.1,24.2,36.3,16.1,16.1,17.5,20.5,30.5}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00156}00156\ \ \ \ \ \textcolor{keywordtype}{char}\ payload[256];}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00157}00157\ \ \ \ \ \textcolor{comment}{//sprintf(payload,"{}\%d,\%f,\%f,\%f,\%f,\%f,\%f,\%f,\%f,\%f,\%f,\%f,\%f,\%f,\%f,\%f"{},420,hgps.latitude,hgps.longitude,hgps.speed,hall1.current,hall2.current,hall3.current,420.0,420.0,42.0,420.0,420.0,420.0,420.0,420.0,420.0);}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00158}00158\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00159}00159\ \ \ \ \ \textcolor{comment}{//sprintf(payload,"{}\%d\ RPM,\ \%d\ c,\ \%d\ s,\ \%d\ lat\ ,\ \%d\ lon"{},(int)rpm,(int)pt100Temp,\ (int)\ hgps.speed\ /10,\ hgps.latitude\ *\ 1000000\ ,\ hgps.longitude\ *\ 1000000);}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00160}00160\ \ \ \ \ sprintf(payload,\textcolor{stringliteral}{"{}testing"{}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00161}00161\ \ \ \ \ \mbox{\hyperlink{my__code_8c_a3379ea969e8f3d0b3feff28db2ef81f8}{lora\_tx\_it}}(payload\ ,\ strlen(payload));}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00162}00162\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00163}00163\ \ \ \ \ \textcolor{comment}{//\ delay}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00164}00164\ \ \ \ \ HAL\_Delay(500);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00165}00165\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00166}00166\ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00167}00167\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00168}00168\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00169}00169\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00174}\mbox{\hyperlink{my__code_8h_a7259c0cadb7bc3e6b343edc3189990e7}{00174}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{my__code_8c_a7259c0cadb7bc3e6b343edc3189990e7}{LCD\_paint}}()}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00175}00175\ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00176}00176\ \ \ \ \ \textcolor{keywordtype}{char}\ line1[20];}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00177}00177\ \ \ \ \ \textcolor{keywordtype}{char}\ line2[20];}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00178}00178\ \ \ \ \ \textcolor{keywordtype}{char}\ line3[20];}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00179}00179\ \ \ \ \ \textcolor{keywordtype}{char}\ line4[20];}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00180}00180\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00181}00181\ \ \ \ \ \textcolor{comment}{//\ assemble\ messages\ (uncomment\ one)}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00182}00182\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00183}00183\ \ \ \ \ \textcolor{comment}{/*All\ parameters*/}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00184}00184\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00185}00185\ \textcolor{comment}{\ \ \ \ sprintf(line1,"{}I1\ \%3dI2\ \%3dI3\ \%3d"{},\ (int)\ (hall1.current\ +\ 0.5\ ),\ (int)\ (hall2.current\ +\ 0.5),\ (int)\ (hall3.current\ +\ 0.5));}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00186}00186\ \textcolor{comment}{\ \ \ \ sprintf(line2,"{}\%4d\ RPM"{},\ (int)\ (rpm\ +\ 0.5));}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00187}00187\ \textcolor{comment}{\ \ \ \ sprintf(line3,"{}\%.1f"{},\ hgps.speed);}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00188}00188\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00189}00189\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00190}00190\ \ \ \ \ \textcolor{comment}{/*GPS\ test*/}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00191}00191\ \ \ \ \ sprintf(line1,\textcolor{stringliteral}{"{}Lat:\%f"{}},\mbox{\hyperlink{my__code_8c_ac8220b038fb744675e8bf5193ebcefb2}{hgps}}.latitude);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00192}00192\ \ \ \ \ sprintf(line2,\textcolor{stringliteral}{"{}Lon:\%f"{}},\mbox{\hyperlink{my__code_8c_ac8220b038fb744675e8bf5193ebcefb2}{hgps}}.longitude);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00193}00193\ \ \ \ \ sprintf(line3,\textcolor{stringliteral}{"{}Speed:\%f"{}},\mbox{\hyperlink{my__code_8c_ac8220b038fb744675e8bf5193ebcefb2}{hgps}}.speed);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00194}00194\ \ \ \ \ sprintf(line4,\textcolor{stringliteral}{"{}fix\ type:\ \%d"{}},\mbox{\hyperlink{my__code_8c_ac8220b038fb744675e8bf5193ebcefb2}{hgps}}.fix\_mode);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00195}00195\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00196}00196\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00197}00197\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00198}00198\ \ \ \ \ \textcolor{comment}{//\ update\ LCD}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00199}00199\ \ \ \ \ \mbox{\hyperlink{pcf8574_8h_aa35596e8e898426a066c74eb86266837}{pcf8574\_clr}}();}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00200}00200\ \ \ \ \ \mbox{\hyperlink{pcf8574_8h_ad7a2ce201ada868604cc706faf280eb1}{pcf8574\_cursor}}(0,\ 0);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00201}00201\ \ \ \ \ \mbox{\hyperlink{pcf8574_8h_a80c7fedc95b28a8c4711b846eec74901}{pcf8574\_send\_string}}(line1);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00202}00202\ \ \ \ \ \mbox{\hyperlink{pcf8574_8h_ad7a2ce201ada868604cc706faf280eb1}{pcf8574\_cursor}}(1,\ 0);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00203}00203\ \ \ \ \ \mbox{\hyperlink{pcf8574_8h_a80c7fedc95b28a8c4711b846eec74901}{pcf8574\_send\_string}}(line2);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00204}00204\ \ \ \ \ \mbox{\hyperlink{pcf8574_8h_ad7a2ce201ada868604cc706faf280eb1}{pcf8574\_cursor}}(2,\ 0);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00205}00205\ \ \ \ \ \mbox{\hyperlink{pcf8574_8h_a80c7fedc95b28a8c4711b846eec74901}{pcf8574\_send\_string}}(line3);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00206}00206\ \ \ \ \ \mbox{\hyperlink{pcf8574_8h_ad7a2ce201ada868604cc706faf280eb1}{pcf8574\_cursor}}(3,\ 0);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00207}00207\ \ \ \ \ \mbox{\hyperlink{pcf8574_8h_a80c7fedc95b28a8c4711b846eec74901}{pcf8574\_send\_string}}(line4);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00208}00208\ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00209}00209\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00210}00210\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00211}00211\ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00212}00212\ \textcolor{comment}{\ *\ \(\backslash\)brief\ This\ function\ reads\ current\ from\ each\ hall\ effect\ current\ sensor}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00213}00213\ \textcolor{comment}{\ *\ using\ an\ ADS1115\ external\ ADC.\ All\ 3\ Vref\ outputs\ are\ connected}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00214}00214\ \textcolor{comment}{\ *\ to\ AIN3,\ and\ all\ Vout\ outputs\ are\ read\ relative\ to\ that}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00215}00215\ \textcolor{comment}{\ *\ */}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00216}\mbox{\hyperlink{my__code_8h_a562b46db6df8519948cd3397d0a74c9f}{00216}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{my__code_8c_a562b46db6df8519948cd3397d0a74c9f}{hall\_read}}()}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00217}00217\ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00218}00218\ \ \ \ \ \textcolor{comment}{//\ hall\ sensor\ 1}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00219}00219\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{ads1115_8h_aeec6c2ea094d21a583046bdbe4d2b540}{ADS1115\_read}}(\mbox{\hyperlink{ads1115_8h_a3dcc1ccba7cb74724d1a506df362a989}{ADS1115\_MUX\_AIN0\_AIN3}},\ \&hall1.rawVoltage)\ ==\ HAL\_OK)}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00220}00220\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00221}00221\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Voltage\ in\ mV\ successfully\ read.}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00222}00222\ \ \ \ \ \ \ \ \ hall1.current\ =\ (hall1.rawVoltage\ -\/\ hall1.offsetVoltage)\ *\ \mbox{\hyperlink{my__code_8h_ac84571f5c253fd004690a73bb38c0151}{HALL\_SENSITIVITY}};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00223}00223\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00224}00224\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00225}00225\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00226}00226\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ current\ read\ fails,\ set\ current\ to\ a\ conspicuous\ value}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00227}00227\ \ \ \ \ \ \ \ \ hall1.current\ =\ 123.456789;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00228}00228\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00229}00229\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00230}00230\ \ \ \ \ \textcolor{comment}{//\ hall\ sensor\ 2}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00231}00231\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{ads1115_8h_aeec6c2ea094d21a583046bdbe4d2b540}{ADS1115\_read}}(\mbox{\hyperlink{ads1115_8h_aac86c5f4331b7f5a43406cdfd053e5ad}{ADS1115\_MUX\_AIN1\_AIN3}},\ \&hall2.rawVoltage)\ ==\ HAL\_OK)}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00232}00232\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00233}00233\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Voltage\ in\ mV\ successfully\ read.}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00234}00234\ \ \ \ \ \ \ \ \ hall2.current\ =\ (hall2.rawVoltage\ -\/\ hall2.offsetVoltage)\ *\ \mbox{\hyperlink{my__code_8h_ac84571f5c253fd004690a73bb38c0151}{HALL\_SENSITIVITY}};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00235}00235\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00236}00236\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00237}00237\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00238}00238\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ current\ read\ fails,\ set\ current\ to\ a\ conspicuous\ value}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00239}00239\ \ \ \ \ \ \ \ \ hall2.current\ =\ 123.456789;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00240}00240\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00241}00241\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00242}00242\ \ \ \ \ \textcolor{comment}{//\ hall\ sensor\ 3}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00243}00243\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{ads1115_8h_aeec6c2ea094d21a583046bdbe4d2b540}{ADS1115\_read}}(\mbox{\hyperlink{ads1115_8h_ac0111dc9cb02d303cb896ed8650b7a48}{ADS1115\_MUX\_AIN2\_AIN3}},\ \&\mbox{\hyperlink{my__code_8c_a09dfb4af94edd4a7ea154efbb490358f}{hall3}}.\mbox{\hyperlink{structhall__struct_a46d034bf9b16163f4fa1f8b7980d34c1}{rawVoltage}})\ ==\ HAL\_OK)}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00244}00244\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00245}00245\ \ \ \ \ \ \ \ \ \textcolor{comment}{//Voltage\ in\ mV\ successfully\ read.}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00246}00246\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a09dfb4af94edd4a7ea154efbb490358f}{hall3}}.\mbox{\hyperlink{structhall__struct_af9653d31acfffa5a40aa709b2065e00b}{current}}\ =\ (\mbox{\hyperlink{my__code_8c_a09dfb4af94edd4a7ea154efbb490358f}{hall3}}.\mbox{\hyperlink{structhall__struct_a46d034bf9b16163f4fa1f8b7980d34c1}{rawVoltage}}\ -\/\ \mbox{\hyperlink{my__code_8c_a09dfb4af94edd4a7ea154efbb490358f}{hall3}}.\mbox{\hyperlink{structhall__struct_a5ee2c3eaba23f030eddaa393122f1104}{offsetVoltage}})\ *\ \mbox{\hyperlink{my__code_8h_ac84571f5c253fd004690a73bb38c0151}{HALL\_SENSITIVITY}};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00247}00247\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00248}00248\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00249}00249\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00250}00250\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ current\ read\ fails,\ set\ current\ to\ a\ conspicuous\ value}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00251}00251\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a09dfb4af94edd4a7ea154efbb490358f}{hall3}}.\mbox{\hyperlink{structhall__struct_af9653d31acfffa5a40aa709b2065e00b}{current}}\ =\ 123.456789;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00252}00252\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00253}00253\ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00254}00254\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00255}00255\ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00256}00256\ \textcolor{comment}{\ *\ \(\backslash\)brief\ This\ function\ zeros\ all\ three\ hall\ effect\ sensors}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00257}00257\ \textcolor{comment}{\ *\ \ it\ will\ block\ due\ to\ internal\ delay\ functions}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00258}00258\ \textcolor{comment}{\ *\ */}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00259}\mbox{\hyperlink{my__code_8h_a98b85952932b02fafbcf56ac1f246954}{00259}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{my__code_8c_a98b85952932b02fafbcf56ac1f246954}{hall\_calibrate}}()}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00260}00260\ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00261}00261\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{ads1115_8h_aeec6c2ea094d21a583046bdbe4d2b540}{ADS1115\_read}}(\mbox{\hyperlink{ads1115_8h_adc2ed1597f0d082666bc60d58af7ebb1}{ADS1115\_MUX\_AIN0\_AIN1}},\ \&hall1.offsetVoltage)\ ==\ HAL\_OK\ \&\&}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00262}00262\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ads1115_8h_aeec6c2ea094d21a583046bdbe4d2b540}{ADS1115\_read}}(\mbox{\hyperlink{ads1115_8h_adc2ed1597f0d082666bc60d58af7ebb1}{ADS1115\_MUX\_AIN0\_AIN1}},\ \&hall2.offsetVoltage)\ ==\ HAL\_OK\ \&\&}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00263}00263\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{ads1115_8h_aeec6c2ea094d21a583046bdbe4d2b540}{ADS1115\_read}}(\mbox{\hyperlink{ads1115_8h_adc2ed1597f0d082666bc60d58af7ebb1}{ADS1115\_MUX\_AIN0\_AIN1}},\ \&\mbox{\hyperlink{my__code_8c_a09dfb4af94edd4a7ea154efbb490358f}{hall3}}.\mbox{\hyperlink{structhall__struct_a5ee2c3eaba23f030eddaa393122f1104}{offsetVoltage}})\ ==\ HAL\_OK)}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00264}00264\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00265}00265\ \ \ \ \ \ \ \ \ \textcolor{comment}{//calibration\ successful}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00266}00266\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_l_c_d_8h_ae60d0b62d7eb3fa31266c095d7b3c245}{LCD\_Clear}}();}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00267}00267\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_l_c_d_8h_a688d80a383c2d920397e8b3a494c4b53}{LCD\_Puts}}(0,1,\textcolor{stringliteral}{"{}******\ CAL\ OK\ ******"{}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00268}00268\ \ \ \ \ \ \ \ \ HAL\_Delay(500);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00269}00269\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00270}00270\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00271}00271\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00272}00272\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_l_c_d_8h_ae60d0b62d7eb3fa31266c095d7b3c245}{LCD\_Clear}}();}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00273}00273\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_l_c_d_8h_a688d80a383c2d920397e8b3a494c4b53}{LCD\_Puts}}(0,1,\textcolor{stringliteral}{"{}*****\ CAL\ FAIL\ *****"{}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00274}00274\ \ \ \ \ \ \ \ \ HAL\_Delay(500);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00275}00275\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00276}00276\ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00277}00277\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00278}00278\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00282}\mbox{\hyperlink{my__code_8h_ab55f9f16932b73a407fa0bca4730d476}{00282}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{my__code_8c_ab55f9f16932b73a407fa0bca4730d476}{gps\_rx}}()}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00283}00283\ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00284}00284\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a63b72da7fff00fc0ce6cac1c4660f415}{buffStateFlag}}\ ==\ read)\ \textcolor{comment}{//\ if\ buffer\ is\ ready\ to\ read}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00285}00285\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00286}00286\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00287}00287\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Process\ all\ input\ data\ */}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00288}00288\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{group___l_w_g_p_s_gaf169c4cd93a4c22c976c9f17b69055a0}{lwgps\_process}}(\&\mbox{\hyperlink{my__code_8c_ac8220b038fb744675e8bf5193ebcefb2}{hgps}},\ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a718512b34ac927fdf021953ca4bb1967}{buff}},\ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_aff39d864a6594bc5f4a5e365282e00fe}{tail}}\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00289}00289\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00290}00290\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ Print\ messages\ for\ debugging\ */}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00291}00291\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00292}00292\ \textcolor{comment}{\ \ \ \ \ \ \ \ char\ message[64];}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00293}00293\ \textcolor{comment}{\ \ \ \ \ \ \ \ sprintf(message,\ "{}Valid\ status:\ \%d\(\backslash\)r\(\backslash\)n"{},\ hgps.is\_valid);}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00294}00294\ \textcolor{comment}{\ \ \ \ \ \ \ \ HAL\_UART\_Transmit(\ \&huart1\ ,\ (uint8\_t\ *)\ message\ ,\ strlen(message)\ ,\ HAL\_MAX\_DELAY);}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00295}00295\ \textcolor{comment}{\ \ \ \ \ \ \ \ sprintf(message,\ "{}Latitude:\ \%f\ degrees\(\backslash\)r\(\backslash\)n"{},\ hgps.latitude);}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00296}00296\ \textcolor{comment}{\ \ \ \ \ \ \ \ HAL\_UART\_Transmit(\ \&huart1\ ,\ (uint8\_t\ *)\ message\ ,\ strlen(message)\ ,\ HAL\_MAX\_DELAY);}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00297}00297\ \textcolor{comment}{\ \ \ \ \ \ \ \ sprintf(message,\ "{}Longitude:\ \%f\ degrees\(\backslash\)r\(\backslash\)n"{},\ hgps.longitude);}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00298}00298\ \textcolor{comment}{\ \ \ \ \ \ \ \ HAL\_UART\_Transmit(\ \&huart1\ ,\ (uint8\_t\ *)\ message\ ,\ strlen(message)\ ,\ HAL\_MAX\_DELAY);}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00299}00299\ \textcolor{comment}{\ \ \ \ \ \ \ \ sprintf(message,\ "{}Altitude:\ \%f\ meters\(\backslash\)r\(\backslash\)n"{},\ hgps.altitude);}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00300}00300\ \textcolor{comment}{\ \ \ \ \ \ \ \ HAL\_UART\_Transmit(\ \&huart1\ ,\ (uint8\_t\ *)\ message\ ,\ strlen(message)\ ,\ HAL\_MAX\_DELAY);}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00301}00301\ \textcolor{comment}{\ \ \ \ \ \ \ \ sprintf(message,\ "{}Speed:\ \%f\ knots\(\backslash\)r\(\backslash\)n"{},\ hgps.speed);}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00302}00302\ \textcolor{comment}{\ \ \ \ \ \ \ \ HAL\_UART\_Transmit(\ \&huart1\ ,\ (uint8\_t\ *)\ message\ ,\ strlen(message)\ ,\ HAL\_MAX\_DELAY);}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00303}00303\ \textcolor{comment}{\ \ \ \ \ \ \ \ sprintf(message,\ "{}Fix\ Mode:\ \%d\ \(\backslash\)r\(\backslash\)n"{},\ hgps.fix\_mode);}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00304}00304\ \textcolor{comment}{\ \ \ \ \ \ \ \ HAL\_UART\_Transmit(\ \&huart1\ ,\ (uint8\_t\ *)\ message\ ,\ strlen(message)\ ,\ HAL\_MAX\_DELAY);}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00305}00305\ \textcolor{comment}{\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00306}00306\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00307}00307\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ put\ receiver\ back\ in\ RX\ state\ */}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00308}00308\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00309}00309\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00310}00310\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a63b72da7fff00fc0ce6cac1c4660f415}{buffStateFlag}}\ =\ write;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00311}00311\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_aff39d864a6594bc5f4a5e365282e00fe}{tail}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00312}00312\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00313}00313\ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00314}00314\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00330}\mbox{\hyperlink{my__code_8c_ae494a9643f29b87d6d81e5264e60e57b}{00330}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{my__code_8c_ae494a9643f29b87d6d81e5264e60e57b}{HAL\_UART\_RxCpltCallback}}(UART\_HandleTypeDef\ *huart)}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00331}00331\ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00332}00332\ \ \ \ \ \textcolor{keywordflow}{if}(\ huart\ ==\ \&\mbox{\hyperlink{my__code_8h_ab7c63c1b0f65db92b6a4ea19edf957e1}{huart3}})}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00333}00333\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00334}00334\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a63b72da7fff00fc0ce6cac1c4660f415}{buffStateFlag}}\ ==\ write)}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00335}00335\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00336}00336\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (\mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a09f051b5f81b33b81ddc4068cc27f0fe}{parsingState}})}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00337}00337\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00338}00338\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ init:}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00339}00339\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a7f4589c5a44136c693a6eee261c917bf}{newchar}}\ ==\ \textcolor{charliteral}{'\$'})}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00340}00340\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00341}00341\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a718512b34ac927fdf021953ca4bb1967}{buff}}[\mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_aff39d864a6594bc5f4a5e365282e00fe}{tail}}]\ =\ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a7f4589c5a44136c693a6eee261c917bf}{newchar}};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00342}00342\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_aff39d864a6594bc5f4a5e365282e00fe}{tail}}++;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00343}00343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a09f051b5f81b33b81ddc4068cc27f0fe}{parsingState}}\ =\ seen\$;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00344}00344\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00345}00345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00346}00346\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ seen\$:}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00347}00347\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a718512b34ac927fdf021953ca4bb1967}{buff}}[\mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_aff39d864a6594bc5f4a5e365282e00fe}{tail}}]\ =\ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a7f4589c5a44136c693a6eee261c917bf}{newchar}};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00348}00348\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_aff39d864a6594bc5f4a5e365282e00fe}{tail}}++;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00349}00349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a7f4589c5a44136c693a6eee261c917bf}{newchar}}\ ==\ \textcolor{charliteral}{'\(\backslash\)n'})}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00350}00350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00351}00351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a344462e154011b2f37a7af0dbf8fd10a}{lineCounter}}++;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00352}00352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a344462e154011b2f37a7af0dbf8fd10a}{lineCounter}}\ >=\ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_aadd3a59cea049460bd4e196c59181118}{numLines}})}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00353}00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00354}00354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ full\ message\ complete}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00355}00355\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(1)\ \textcolor{comment}{//\ check\ for\ time\ TKTKT}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00356}00356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00357}00357\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a718512b34ac927fdf021953ca4bb1967}{buff}}[\mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_aff39d864a6594bc5f4a5e365282e00fe}{tail}}\ +\ 1]\ =\ \textcolor{charliteral}{'0'};\ \textcolor{comment}{//\ null\ terminate\ buffer\ might\ not\ be\ necessary)}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00358}00358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a63b72da7fff00fc0ce6cac1c4660f415}{buffStateFlag}}\ =\ read;\ \textcolor{comment}{//\ set\ flag\ for\ main\ program;}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00359}00359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a09f051b5f81b33b81ddc4068cc27f0fe}{parsingState}}\ =\ init;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00360}00360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a344462e154011b2f37a7af0dbf8fd10a}{lineCounter}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00361}00361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00362}00362\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00363}00363\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00364}00364\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//too\ long\ since\ last\ line,\ restart}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00365}00365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_aff39d864a6594bc5f4a5e365282e00fe}{tail}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00366}00366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a09f051b5f81b33b81ddc4068cc27f0fe}{parsingState}}\ =\ init;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00367}00367\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00368}00368\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00369}00369\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00370}00370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00371}00371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00372}00372\ \ \ \ \ \ \ \ \ \ \ \ \ default\ :\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00373}00373\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00374}00374\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00375}00375\ \ \ \ \ \ \ \ \ HAL\_UART\_Receive\_IT(\&\mbox{\hyperlink{my__code_8h_ab7c63c1b0f65db92b6a4ea19edf957e1}{huart3}}\ ,\ (uint8\_t\ *)\ \&\ \mbox{\hyperlink{my__code_8c_ac4a5f96cb0722027682251a1fba3f60e}{gps}}.\mbox{\hyperlink{structgps__struct_a7f4589c5a44136c693a6eee261c917bf}{newchar}}\ ,\ 1);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00376}00376\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00377}00377\ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00378}00378\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00379}00379\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00380}00380\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00381}\mbox{\hyperlink{my__code_8h_a69cac0eadc64f447090ab8ac43653a12}{00381}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{my__code_8c_a69cac0eadc64f447090ab8ac43653a12}{lora\_TX\_blocking}}(\textcolor{keywordtype}{char}\ *\ payload,\ \textcolor{keywordtype}{int}\ length)}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00382}00382\ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00383}00383\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00384}00384\ \textcolor{comment}{\ \ \ \ *\ format\ is\ AT+SEND=<Address>,<Payload\ Length>,<Data>\(\backslash\)r\(\backslash\)n}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00385}00385\ \textcolor{comment}{\ \ \ \ *\ ex:\ AT+SEND=5,5,hello\(\backslash\)r\(\backslash\)n}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00386}00386\ \textcolor{comment}{\ \ \ \ *\ brackets\ are\ not\ sent}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00387}00387\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00388}00388\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00389}00389\ \ \ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{my__code_8c_ae1b4a2a0bd124fb2ee430c8ba7e3a071}{message}}[64];}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00390}00390\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00391}00391\ \ \ \ \ sprintf(\mbox{\hyperlink{my__code_8c_ae1b4a2a0bd124fb2ee430c8ba7e3a071}{message}},\ \textcolor{stringliteral}{"{}AT+SEND=\%d,\%d,\%s\(\backslash\)r\(\backslash\)n"{}},\mbox{\hyperlink{my__code_8h_a073581d7f31c92d23f38cb98b60ea56d}{LORA\_RECIVER\_ADDRESS}},length,payload);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00392}00392\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00393}00393\ \ \ \ \ HAL\_UART\_Transmit(\ \&\mbox{\hyperlink{my__code_8h_a2cf715bef37f7e8ef385a30974a5f0d5}{huart1}}\ ,\ (uint8\_t\ *)\ \mbox{\hyperlink{my__code_8c_ae1b4a2a0bd124fb2ee430c8ba7e3a071}{message}}\ ,\ strlen(\mbox{\hyperlink{my__code_8c_ae1b4a2a0bd124fb2ee430c8ba7e3a071}{message}})\ ,\ HAL\_MAX\_DELAY);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00394}00394\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00395}00395\ \ \ \ \ \textcolor{comment}{//\ TX\ takes\ some\ time,\ can\ be\ calculated.\ Also\ should\ read\ back\ in\ the\ "{}+OK"{}\ response.}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00396}00396\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00397}00397\ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00398}00398\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00399}00399\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00402}\mbox{\hyperlink{my__code_8h_a3379ea969e8f3d0b3feff28db2ef81f8}{00402}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{my__code_8c_a3379ea969e8f3d0b3feff28db2ef81f8}{lora\_tx\_it}}(\textcolor{keywordtype}{char}\ *\ payload\ ,\ \textcolor{keywordtype}{int}\ length)}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00403}00403\ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00404}00404\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00405}00405\ \textcolor{comment}{\ \ \ \ *\ message\ format\ is\ "{}AT+SEND=<Address>,<Payload\ Length>,<Data>\(\backslash\)r\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00406}00406\ \textcolor{comment}{\ \ \ \ *\ ex:\ "{}AT+SEND=5,5,hello\(\backslash\)r\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00407}00407\ \textcolor{comment}{\ \ \ \ *\ (brackets\ are\ not\ sent)}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00408}00408\ \textcolor{comment}{\ \ \ \ *\ Response\ received\ on\ success\ is\ "{}+OK\(\backslash\)r\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00409}00409\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00410}00410\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00411}00411\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{my__code_8c_ae1b4a2a0bd124fb2ee430c8ba7e3a071}{message}}[64];}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00412}00412\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00413}00413\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ generate\ message\ string}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00414}00414\ \ \ \ \ \ \ \ \ sprintf(\mbox{\hyperlink{my__code_8c_ae1b4a2a0bd124fb2ee430c8ba7e3a071}{message}},\ \textcolor{stringliteral}{"{}AT+SEND=\%d,\%d,\%s\(\backslash\)r\(\backslash\)n"{}},\mbox{\hyperlink{my__code_8h_a073581d7f31c92d23f38cb98b60ea56d}{LORA\_RECIVER\_ADDRESS}},length,payload);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00415}00415\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00416}00416\ \ \ \ \ \ \ \ \ HAL\_UART\_Transmit\_IT(\ \&\mbox{\hyperlink{my__code_8h_a2cf715bef37f7e8ef385a30974a5f0d5}{huart1}}\ ,\ (uint8\_t\ *)\ \mbox{\hyperlink{my__code_8c_ae1b4a2a0bd124fb2ee430c8ba7e3a071}{message}}\ ,\ strlen(\mbox{\hyperlink{my__code_8c_ae1b4a2a0bd124fb2ee430c8ba7e3a071}{message}}));}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00417}00417\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00418}00418\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00419}00419\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ TX\ takes\ some\ time,\ which\ can\ be\ calculated\ in\ theory}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00420}00420\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ If\ another\ message\ is\ sent\ too\ soon,\ the\ radio\ will\ ignore\ it.}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00421}00421\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ Alternatively,\ the\ program\ could\ read\ back\ in\ the\ "{}+OK"{}\ response}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00422}00422\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ and\ only\ send\ another\ message\ after\ that.}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00423}00423\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ *\ (this\ is\ not\ currently\ implemented)}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00424}00424\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00425}00425\ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00426}00426\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00427}\mbox{\hyperlink{my__code_8c_a77a2401a35ddd9bd0b8fc28331b81381}{00427}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{my__code_8c_a77a2401a35ddd9bd0b8fc28331b81381}{HAL\_TIM\_IC\_CaptureCallback}}(TIM\_HandleTypeDef\ *htim)\{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00428}00428\ \ \ \textcolor{keywordflow}{if}(htim-\/>Channel\ ==\ HAL\_TIM\_ACTIVE\_CHANNEL\_1)\ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00429}00429\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{my__code_8c_a5d7fd7789fda6c42c591954c2bb70588}{Is\_First\_Captured}}\ ==\ 0)\{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00430}00430\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a493470a87e69019c801d43e7903a0cb6}{IC\_Val1}}\ =\ HAL\_TIM\_ReadCapturedValue(htim,\ TIM\_CHANNEL\_1);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00431}00431\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a5d7fd7789fda6c42c591954c2bb70588}{Is\_First\_Captured}}\ =\ 1;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00432}00432\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00433}00433\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00434}00434\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_ad6e044721ac3056f8eeaf52ffbb6638b}{IC\_Val2}}\ =\ HAL\_TIM\_ReadCapturedValue(htim,\ TIM\_CHANNEL\_1);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00435}00435\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00436}00436\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{my__code_8c_ad6e044721ac3056f8eeaf52ffbb6638b}{IC\_Val2}}\ >\ \mbox{\hyperlink{my__code_8c_a493470a87e69019c801d43e7903a0cb6}{IC\_Val1}})\{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00437}00437\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a7cb3d9526cb717de1ac2f83a7b7d88a4}{Difference}}\ =\ \mbox{\hyperlink{my__code_8c_ad6e044721ac3056f8eeaf52ffbb6638b}{IC\_Val2}}-\/\mbox{\hyperlink{my__code_8c_a493470a87e69019c801d43e7903a0cb6}{IC\_Val1}};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00438}00438\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00439}00439\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{my__code_8c_a493470a87e69019c801d43e7903a0cb6}{IC\_Val1}}\ >\ \mbox{\hyperlink{my__code_8c_ad6e044721ac3056f8eeaf52ffbb6638b}{IC\_Val2}})\{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00440}00440\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a7cb3d9526cb717de1ac2f83a7b7d88a4}{Difference}}\ =\ (0xffffffff\ -\/\ \mbox{\hyperlink{my__code_8c_a493470a87e69019c801d43e7903a0cb6}{IC\_Val1}})\ +\ \mbox{\hyperlink{my__code_8c_ad6e044721ac3056f8eeaf52ffbb6638b}{IC\_Val2}};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00441}00441\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00442}00442\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00443}00443\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ refClock\ =\ \mbox{\hyperlink{my__code_8h_aa7e8765166068719381b53c8412d3ad6}{TIMCLOCK}}/(\mbox{\hyperlink{my__code_8h_a68b1b44e3ac5c4e2e90ef1e7e7e7ec88}{PRESCALAR}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00444}00444\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00445}00445\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a9d3c19e881c80a6596884ecb8da4a0f4}{Frequency}}\ =\ refClock/\mbox{\hyperlink{my__code_8c_a7cb3d9526cb717de1ac2f83a7b7d88a4}{Difference}};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00446}00446\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a25e39b399c2a11f0d76e42ab8241a910}{rpm}}\ =\ \mbox{\hyperlink{my__code_8c_a9d3c19e881c80a6596884ecb8da4a0f4}{Frequency}}\ *\ 60.0;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00447}00447\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00448}00448\ \ \ \ \ \ \ \ \ \_\_HAL\_TIM\_SET\_COUNTER(htim,\ 0);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00449}00449\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a5d7fd7789fda6c42c591954c2bb70588}{Is\_First\_Captured}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00450}00450\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00451}00451\ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00452}00452\ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00453}00453\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00457}\mbox{\hyperlink{my__code_8h_acd5eb894164a07a00867af26c324b26a}{00457}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{my__code_8c_acd5eb894164a07a00867af26c324b26a}{readVoltage}}(\textcolor{keywordtype}{float}\ div)\{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00458}00458\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00459}00459\ \ \ \ \ \ \ \textcolor{comment}{/*\ Poll\ for\ voltage\ divider*/}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00460}00460\ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a251b2b87677061134af81bc00ad40c70}{ADC\_Select\_CH0}}();}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00461}00461\ \ \ \ \ \ \ HAL\_ADC\_Start(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00462}00462\ \ \ \ \ \ \ HAL\_ADC\_PollForConversion(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}},1000);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00463}00463\ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a4d122fe4f75f69642832764efc0f451c}{readValue}}\ =\ HAL\_ADC\_GetValue(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00464}00464\ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a03220cc699ee703ec90047e2a87c4785}{volt0}}\ =\ ((float)\ \mbox{\hyperlink{my__code_8c_a4d122fe4f75f69642832764efc0f451c}{readValue}}\ *\ 3.3\ /\ 4095.0)\ /\ (float)\ div\ ;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00465}00465\ \ \ \ \ \ \ HAL\_Delay\ (100);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00466}00466\ \ \ \ \ \ \ HAL\_ADC\_Stop(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00467}00467\ \ \ \ \ \ \ \textcolor{comment}{//\ .9104151493}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00468}00468\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00469}00469\ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_acb840db66fc6cc2cc8f57bd208fabd0b}{ADC\_Select\_CH1}}();}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00470}00470\ \ \ \ \ \ \ HAL\_ADC\_Start(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00471}00471\ \ \ \ \ \ \ HAL\_ADC\_PollForConversion(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}},1000);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00472}00472\ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a4d122fe4f75f69642832764efc0f451c}{readValue}}\ =\ HAL\_ADC\_GetValue(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00473}00473\ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a492129e77ccbe26628dbf3253cfc03f3}{volt1}}\ =\ ((float)\ \mbox{\hyperlink{my__code_8c_a4d122fe4f75f69642832764efc0f451c}{readValue}}\ *\ 3.3\ *\ .9104151493\ /\ 4095.0)\ /\ (float)\ div\ ;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00474}00474\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00475}00475\ \ \ \ \ \ \ HAL\_Delay\ (100);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00476}00476\ \ \ \ \ \ \ HAL\_ADC\_Stop(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00477}00477\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00478}00478\ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_adb4a850ae98f4c5235a813f1f92ae52d}{ADC\_Select\_CH2}}();}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00479}00479\ \ \ \ \ \ \ HAL\_ADC\_Start(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00480}00480\ \ \ \ \ \ \ HAL\_ADC\_PollForConversion(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}},1000);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00481}00481\ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a4d122fe4f75f69642832764efc0f451c}{readValue}}\ =\ HAL\_ADC\_GetValue(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00482}00482\ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_ab75f4db6d1e874ad84b544b298551ccc}{volt2}}\ =\ ((float)\ \mbox{\hyperlink{my__code_8c_a4d122fe4f75f69642832764efc0f451c}{readValue}}\ *\ 3.3\ *\ .9104151493\ /\ 4095.0)\ /\ (float)\ div\ ;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00483}00483\ \ \ \ \ \ \ HAL\_Delay\ (100);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00484}00484\ \ \ \ \ \ \ HAL\_ADC\_Stop(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00485}00485\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00486}00486\ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_aa35b535901d9f153065156a93abeb107}{ADC\_Select\_CH3}}();}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00487}00487\ \ \ \ \ \ \ HAL\_ADC\_Start(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00488}00488\ \ \ \ \ \ \ HAL\_ADC\_PollForConversion(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}},1000);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00489}00489\ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a4d122fe4f75f69642832764efc0f451c}{readValue}}\ =\ HAL\_ADC\_GetValue(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00490}00490\ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a9ba4b6c7877ede091f28d1b0d74d0a91}{volt3}}\ =\ ((float)\ \mbox{\hyperlink{my__code_8c_a4d122fe4f75f69642832764efc0f451c}{readValue}}\ *\ 3.3\ *\ .9104151493\ /\ 4095.0)\ /\ (float)\ div\ ;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00491}00491\ \ \ \ \ \ \ HAL\_Delay\ (100);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00492}00492\ \ \ \ \ \ \ HAL\_ADC\_Stop(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00493}00493\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00494}00494\ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00495}00495\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00496}\mbox{\hyperlink{my__code_8c_a656e85eaba42f1b5ea2488b0375ecf22}{00496}}\ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{my__code_8c_a656e85eaba42f1b5ea2488b0375ecf22}{readCurrent}}(\textcolor{keywordtype}{void})\{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00497}00497\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00498}00498\ \ \ \ \ \ \ HAL\_ADC\_PollForConversion(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}},1000);}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00499}00499\ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a4d122fe4f75f69642832764efc0f451c}{readValue}}\ =\ HAL\_ADC\_GetValue(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}});}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00500}00500\ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_a46d034bf9b16163f4fa1f8b7980d34c1}{rawVoltage}}\ =\ (float)\ \mbox{\hyperlink{my__code_8c_a4d122fe4f75f69642832764efc0f451c}{readValue}}\ *\ 3.3\ *\ .9104151493\ /\ 4095.0\ ;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00501}00501\ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ rawVoltage\ is\ not\ 2.5Volt,\ multiply\ by\ a\ factor.In\ my\ case\ it\ is\ 1.035}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00502}00502\ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ is\ due\ to\ tolerance\ in\ voltage\ divider\ resister\ \&\ ADC\ accuracy}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00503}00503\ \ \ \ \ \ \ \mbox{\hyperlink{my__code_8c_af9653d31acfffa5a40aa709b2065e00b}{current}}\ =(\mbox{\hyperlink{my__code_8c_a46d034bf9b16163f4fa1f8b7980d34c1}{rawVoltage}}\ -\/\ 2.4988276)/\mbox{\hyperlink{my__code_8c_ac518d2e94791ccc6f84de95271e52c76}{sensitivity}};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00504}00504\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{my__code_8c_af9653d31acfffa5a40aa709b2065e00b}{current}};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00505}00505\ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00506}00506\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00510}\mbox{\hyperlink{my__code_8h_acb840db66fc6cc2cc8f57bd208fabd0b}{00510}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{my__code_8c_acb840db66fc6cc2cc8f57bd208fabd0b}{ADC\_Select\_CH1}}\ (\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00511}00511\ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00512}00512\ \ \ \ \ ADC\_ChannelConfTypeDef\ sConfig\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00513}00513\ \ \ \ \ \ \ \textcolor{comment}{//\ Configure\ for\ the\ selected\ ADC\ regular\ channel\ its\ corresponding\ rank\ in\ the\ sequencer\ and\ its\ sample\ time.}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00514}00514\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00515}00515\ \ \ \ \ \ \ sConfig.Channel\ =\ ADC\_CHANNEL\_1;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00516}00516\ \ \ \ \ \ \ sConfig.Rank\ =\ 1;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00517}00517\ \ \ \ \ \ \ sConfig.SamplingTime\ =\ \ ADC\_SAMPLETIME\_1CYCLE\_5;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00518}00518\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (HAL\_ADC\_ConfigChannel(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}},\ \&sConfig)\ !=\ HAL\_OK)}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00519}00519\ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00520}00520\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8h_a1730ffe1e560465665eb47d9264826f9}{Error\_Handler}}();}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00521}00521\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00522}00522\ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00523}00523\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00527}\mbox{\hyperlink{my__code_8h_adb4a850ae98f4c5235a813f1f92ae52d}{00527}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{my__code_8c_adb4a850ae98f4c5235a813f1f92ae52d}{ADC\_Select\_CH2}}\ (\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00528}00528\ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00529}00529\ \ \ \ \ ADC\_ChannelConfTypeDef\ sConfig\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00530}00530\ \ \ \ \ \ \ \textcolor{comment}{//\ Configure\ for\ the\ selected\ ADC\ regular\ channel\ its\ corresponding\ rank\ in\ the\ sequencer\ and\ its\ sample\ time.}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00531}00531\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00532}00532\ \ \ \ \ \ \ sConfig.Channel\ =\ ADC\_CHANNEL\_2;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00533}00533\ \ \ \ \ \ \ sConfig.Rank\ =\ 1;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00534}00534\ \ \ \ \ \ \ sConfig.SamplingTime\ =\ \ ADC\_SAMPLETIME\_1CYCLE\_5;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00535}00535\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (HAL\_ADC\_ConfigChannel(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}},\ \&sConfig)\ !=\ HAL\_OK)}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00536}00536\ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00537}00537\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8h_a1730ffe1e560465665eb47d9264826f9}{Error\_Handler}}();}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00538}00538\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00539}00539\ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00540}00540\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00544}\mbox{\hyperlink{my__code_8h_aa35b535901d9f153065156a93abeb107}{00544}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{my__code_8c_aa35b535901d9f153065156a93abeb107}{ADC\_Select\_CH3}}\ (\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00545}00545\ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00546}00546\ \ \ \ \ ADC\_ChannelConfTypeDef\ sConfig\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00547}00547\ \ \ \ \ \ \ \textcolor{comment}{//\ Configure\ for\ the\ selected\ ADC\ regular\ channel\ its\ corresponding\ rank\ in\ the\ sequencer\ and\ its\ sample\ time.}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00548}00548\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00549}00549\ \ \ \ \ \ \ sConfig.Channel\ =\ ADC\_CHANNEL\_3;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00550}00550\ \ \ \ \ \ \ sConfig.Rank\ =\ 1;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00551}00551\ \ \ \ \ \ \ sConfig.SamplingTime\ =\ \ ADC\_SAMPLETIME\_1CYCLE\_5;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00552}00552\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (HAL\_ADC\_ConfigChannel(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}},\ \&sConfig)\ !=\ HAL\_OK)}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00553}00553\ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00554}00554\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8h_a1730ffe1e560465665eb47d9264826f9}{Error\_Handler}}();}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00555}00555\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00556}00556\ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00557}00557\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00561}\mbox{\hyperlink{my__code_8h_a251b2b87677061134af81bc00ad40c70}{00561}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{my__code_8c_a251b2b87677061134af81bc00ad40c70}{ADC\_Select\_CH0}}\ (\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00562}00562\ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00563}00563\ \ \ \ \ ADC\_ChannelConfTypeDef\ sConfig\ =\ \{0\};}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00564}00564\ \ \ \ \ \ \ \textcolor{comment}{//\ Configure\ for\ the\ selected\ ADC\ regular\ channel\ its\ corresponding\ rank\ in\ the\ sequencer\ and\ its\ sample\ time.}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00565}00565\ }
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00566}00566\ \ \ \ \ \ \ sConfig.Channel\ =\ ADC\_CHANNEL\_0;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00567}00567\ \ \ \ \ \ \ sConfig.Rank\ =\ 1;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00568}00568\ \ \ \ \ \ \ sConfig.SamplingTime\ =\ \ ADC\_SAMPLETIME\_1CYCLE\_5;}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00569}00569\ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (HAL\_ADC\_ConfigChannel(\&\mbox{\hyperlink{adc_8h_a62fcafba91cf315db7e0e0c8f22c656f}{hadc}},\ \&sConfig)\ !=\ HAL\_OK)}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00570}00570\ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00571}00571\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{main_8h_a1730ffe1e560465665eb47d9264826f9}{Error\_Handler}}();}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00572}00572\ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{my__code_8c_source_l00573}00573\ \}}

\end{DoxyCode}
